# خدمات منزلية — Full-stack Starter Project

هذا المشروع هو هيكل أولي قابل للتطوير لتطبيق «خدمات منزلية» (طالب خدمة / مقدم خدمة / مشرف).
يحتوي على backend (Node.js + Express + PostgreSQL) و frontend (React + Vite + Tailwind - RTL) مع إعداد Docker.

## المزايا الموجودة في النسخة الأولية
- تسجيل/تسجيل دخول (JWT) مع نوع المستخدم (client / provider / admin)
- نماذج قواعد بيانات أساسية (users, services, requests, offers, transactions, reviews)
- واجهات صفحات جاهزة كمكونات React (نصية/قابلة للتوسع): تسجيل، إنشاء طلب، استعراض عروض، دفع/تأكيد، تقييم، لوحة تحكم
- إعداد Docker + docker-compose لتشغيل Postgres و backend و frontend
- إرشادات للنشر، التكامل مع بوابات الدفع، وإدارة العمولات

## متطلبات
- Docker & docker-compose مثبتان
- (خيارياً) Node.js و npm إذا أردت تشغيل خارج الحاويات

## تشغيل سريع (باستخدام Docker)
1. انسخ ملف `.env.example` إلى `.env` وعدّل القيم إذا لزم.
2. بناء وتشغيل الحاويات:
```bash
docker-compose build
docker-compose up -d
```
3. الواجهة الأمامية متاحة على: `http://localhost:3000`
   الـ API متاح على: `http://localhost:4000`

## هيكل المشروع
- backend/      -> كود الخادم (Express)
- frontend/     -> كود الواجهة (React + Vite + Tailwind)
- docker-compose.yml
- README.md

## ملاحظات مهمة (التكامل مع الدفع والعمولات)
- في حالة الدفع داخل التطبيق: يتم الاحتفاظ بالمبلغ مؤقتًا في حساب خدمة ESCROW داخل النظام ثم تحويله لمقدم الخدمة بعد تأكيد العميل بخصم عمولة (مثلاً 10%). النقاط المهمة:
  - استخدم مزود دفع يدعم webhooks (STC Pay / mada / HyperPay / Tap) لتأكيد الدفعات واستلام الإشعارات الآمنة.
  - عند الدفع كاش: قم بتحديث رصيد مقدم الخدمة (wallet) واطرح العمولة تلقائيًا من هذا الرصيد.
- حماية endpoints الحرجة: تأكد من التحقق من الـ JWT ووجود صلاحيات الدور (role-based access).
- سجّل كل المعاملات المالية (transactions) لسرعة التدقيق والمراجعة.

## خطوات لاحقة مقترحة
- إضافة اختبارات وحدات (unit tests) وend-to-end
- نشر إلى Kubernetes أو خدمات PaaS (DigitalOcean, AWS ECS, Heroku)
- ربط بوابات دفع حقيقية، التحقق من الهوية، وتوثيق SMS

---
> هذا مشروع مبدئي لتسريع التطوير. لتسليم منتج جاهز للإنتاج، سأكمل التطوير (مع اختبارات أمنية، مراجعة الأداء، ومراجعة القوانين المحلية للمدفوعات).